\documentclass[12pt, leqno, british]{amsart}
\input{../preamble}
\addbibresource{../bibliography.bib}
\externaldocument[M-]{../Lecture-notes}

\author{Nicolas Daans}
\address{Charles University, Faculty of Mathematics and Physics, Department of Algebra, Sokolov\-sk\' a 83, 18600 Praha~8, Czech Republic.}
\email{nicolas.daans@matfyz.cuni.cz}

\begin{document}

\section{Lecture 9}

\subsection{Hilbert's Reciprocity Law}
We now start our way towards a classification of quadratic forms over $\qq$.
As discussed in the previous lecture, given a quadratic form over $\qq$, we can consider the scalar extension to $\rr$ or $\qq_p$, and the goal is to understand quadratic forms over $\qq$ via its scalar extensions to $\rr$ and $\qq_p$ for different primes $p$.

The first result is called Hilbert's Reciprocity Law\index{reciprocity law!Hilbert's}, and is a consequence of the Quadratic Reciprocity Law\index{reciprocity law!quadratic}.
Let us first recall the Quadratic Reciprocity Law; see any book or course on elementary number theory for a proof.
\begin{thm}[Quadratic Reciprocity]\label{T:QuadraticReciprocity}
Let $p, q \in \mbb P \setminus \lbrace 2 \rbrace$ be such that $p \neq q$.
\begin{itemize}
\item $-1$ is a square in $\ff_p$ if and only if $p \equiv 1 \bmod 4$,
\item $2$ is a square in $\ff_p$ if and only if $p \equiv \pm 1 \bmod 8$,
\item $p$ is a square in $\ff_q$ if and only if
\begin{itemize}
\item $p \equiv 1 \bmod 4$ and $q$ is a square in $\ff_p$, or
\item $q \equiv 1 \bmod 4$ and $q$ is a square in $\ff_p$, or
\item $p \equiv q \equiv 3 \bmod 4$ and $q$ is not a square in $\ff_p$.
\end{itemize}
\end{itemize}
\end{thm}
\begin{lem}\label{L:I2/I3R}
$\llangle -1, -1 \rrangle_{\rr}$ is the unique anisotropic quadratic form over $\rr$ up to isometry.
For any $x, y \in \rr^\times$, we have $\lbrace x, y \rbrace_{\rr} = 0$ if and only if $x > 0$ or $y > 
0$.
In particular, $I\rr/I^2\rr \cong \zz/2\zz$.
\end{lem}
\begin{proof}
Exercise.
\end{proof}
To state Hilbert's Reciprocity Theorem, it will be convenient to set $\qq_{\infty} = \rr$ and $\mbb P' = \mbb P \cup \lbrace \infty \rbrace$.
\begin{thm}[Hilbert's Reciprocity Law]\label{T:HilbertReciprocity}
Let $x, y \in \qq^\times$.
The set
$$ S = \lbrace p \in \mbb P' \mid \lbrace x, y \rbrace_{\qq_p} \neq 0 \rbrace$$
contains a finite, even number of elements.
\end{thm}
\begin{proof}
For all but finitely many $p \in \mbb P \setminus \lbrace 2 \rbrace$, $v_p(x) = v_p(y) = 0$ [REFERENCE].
By \Cref{M-P:2-fold-Pfister-qqp-odd} we thus obtain $\lbrace x, y \rbrace_{\qq_p} = 0$ for all but these finitely many odd prime numbers.
This shows that this set $S$ is always finite.

Now consider the map
\begin{displaymath}
\oplus : I^2\qq /I^3\qq \to \bigoplus_{p \in \mbb P'} I^2\qq_p/I^3\qq_p : [q] \mapsto \oplus_{p \in \mbb P'} [q_{\qq_p}].
\end{displaymath}
By the observation from the previous paragraph: any symbol $\lbrace x, y \rbrace_{\qq}$ becomes $0$ when extending scalars to all but finitely many $\qq_p$, so this map is well-defined.
In fact, since each of the individual maps $[q] \mapsto [q_{\qq_p}]$ is a group homomorphism by \Cref{M-P:restriction-homomorphism}, also the map $\oplus_{p \in \mbb P'}\cdot_p$ is a group homomorphism.

Now consider the map
\begin{displaymath}
\Sigma : \bigoplus_{p \in \mbb P'} I^2\qq_p/I^3\qq_p \to \zz/2\zz : \oplus_{p \in \mbb P'} [q_p] \mapsto \sum_{p \in \mbb P'} \delta_{[q_p]}
\end{displaymath}
where $\delta_{[q_p]} = 0$ if $[q_p] = 0$ and otherwise $\delta_{[q_p]} = 1$.
This is a well-defined map, and since $I^2\qq_p/I^3\qq_p \cong \zz/2\zz$ for all $p \in \mbb P'$ by \Cref{M-C:unique-2-fold-Pfister-qqp-odd}, \Cref{M-P:2-fold-Pfister-qq2}, and \Cref{L:I2/I3R}, it is actually a group homomorphism.

We now make the following observation: to show the theorem is to show that the map $\Sigma \circ \oplus = 0$; in other words, the image of $\circ$ is contained in the kernel of $\Sigma$.
Since $\Sigma \circ \oplus$ is a group homomorphism, it suffices to show that $\Sigma \circ \oplus$ is zero on a set of generators of $I^2\qq/I^3\qq$.

$I^2\qq_p/I^3\qq_p$ is generated by symbols $\lbrace x, y \rbrace_{\qq}$ for $x, y \in \qq^\times$.
By the computation rules for symbols (\Cref{M-C:K-theory-axioms}) we may assume that $x, y \in \zz$.
In fact, using bilinearity (\Cref{M-P:K-theory-axioms}) and the fact that every integer is a product of prime numbers and $\pm 1$, we have reduced to showing the theorem in the following cases:
\begin{itemize}
\item $x = y = -1$,
\item $x = -1$, $y = 2$,
\item $x = y = 2$,
\item $x = -1$, $y = p$ for some $p \in \mbb P \setminus \lbrace 2 \rbrace$,
\item $x = 2$, $y = p$ for some $p \in \mbb P \setminus \lbrace 2 \rbrace$,
%\item $x = y = p$ for some $p \in \mbb P \setminus \lbrace 2 \rbrace$,
\item $x = p$ and $y = q$ for some primes $p, q \in \mbb P \setminus \lbrace 2 \rbrace$.
\end{itemize}
Each of these cases can now be checked by hand, using \Cref{T:QuadraticReciprocity} and the computation rules for $\lbrace x, y \rbrace_{\qq_p}$ (\Cref{M-P:2-fold-Pfister-qqp-odd}, \Cref{M-P:2-fold-Pfister-qq2}, \Cref{L:I2/I3R}).
Let us consider the last of them and leave the others as an exercise.

So suppose $p, q \in \mbb P \setminus \lbrace 2 \rbrace$ and let $S = \lbrace p \in \mbb P' \mid \lbrace p, q \rbrace_{\qq_p} \neq 0 \rbrace$.
By \Cref{M-P:2-fold-Pfister-qqp-odd} $r \not\in S$ for any $r \in \mbb P \setminus \lbrace 2,p,q\rbrace$.
By \Cref{M-P:2-fold-Pfister-qq2} we have that $\infty \not\in S$.
By \Cref{M-P:2-fold-Pfister-qq2} we have $2 \in S$ if and only if $p, q \equiv 3 \bmod 4$.
Furthermore, we compute using \Cref{M-P:2-fold-Pfister-qqp-odd} and \Cref{T:QuadraticReciprocity} that
\begin{align*}
p \in S &\Leftrightarrow q \text{ is not a square in } \ff_p \\
&\Leftrightarrow \begin{cases}
p \text{ is a square in } \ff_q &\text{if } p \equiv q \equiv 3 \bmod 4 \\
p \text{ is not a square in } \ff_q &\text{otherwise}
\end{cases} \\
&\Leftrightarrow \begin{cases}
q \not\in S &\text{if } p \equiv q \equiv 3 \bmod 4 \\
q \in S &\text{otherwise}
\end{cases}.
\end{align*}
From this we conclude that $\lvert S \rvert \in \lbrace 0, 2 \rbrace$, and thus in particular $S$ contains an even number of elements, as desired.
\end{proof}

\subsection{Approximation}

\subsection{Exercises}
\begin{enumerate}
\item Give a proof of \Cref{L:I2/I3R}.
\end{enumerate}

\end{document}